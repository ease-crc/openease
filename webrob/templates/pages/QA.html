{% extends "pages/knowrob_base.html" %}

{% block head_inner %}
    <script type="text/javascript" src="{{ url_for('static', filename='js/form-js/image_resizer.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/ROSCanvas.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/Blackboard.js') }}"></script>
    <script type="text/javascript" src="{{ url_for('static', filename='js/pages/QA.js') }}"></script>

    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/SCSS/page.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/SCSS/split.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/SCSS/console.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/SCSS/canvas.css') }}"/>
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/SCSS/blackboard.css') }}"/>
  
    <!--FIXME: openEASE must run offline, replace this!
        But there are some difficulties getting the google charts
        into the current build procedure using browserify.
    -->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script>
        google.load("visualization", "1", {packages:["timeline"]});
        //google.load("visualization", "1", {packages:["corechart","timeline"]});
    </script>

    <meta name="viewport" content="width=device-width, initial-scale=1">
{% endblock %}

{% block content %}
<script type="text/javascript">
    const page = new KnowrobUI(flask_user, {
        authentication: '{{ authentication }}',
        neem_id: '{{ neem.neem_id }}',
        ros_url: 'ws' + (location.protocol === 'https:'?'s':'') +
                 '://{{ host_url }}/ws/{{ container_name }}/'
    });
    // call page.init() when the document is ready
    $(document).ready(page.init);
</script>

<div id="page-content">
    <div id="QA-container" class="w-100 h-100 container-fluid">
        <div class="row h-100" style="overflow: auto">
            <!-- left column -->
            <div class="col-sm-2"></div>
            <!-- central column -->
            <div class="col-sm-8">
                <div class="text-center p-2">
                    <!-- FIXME: seems loading the SVG is slow, better use PNG -->
                    <!-- TODO: design a banner image? -->
                    <img src="static/logos/oe-logo.svg" class="img-fluid" >
                </div>
                <div>
                    <div id="user_query">is_event(Evt).</div>
                    <div id="query_buttons">
                        <!-- <a id="btn_query_next" href="#" onclick="page.console.nextSolution()"><i class="fas fa-redo"></i></a> -->
                        <a id="btn_query" href="#" onclick="page.console.query()"><i class="fas fa-question"></i></a>
                    </div>
                </div>
                <div id="query_links" class="text-right">
                    <a href="#"><i class="fas fa-th"></i> Examples</a>
                </div>

                <!--
                <div id="markers" class="h-100">
                    <p class="icon-links marker-links">
                        <a href="#" onclick="page.snapshot()">
                            <i class="fa fa-camera" title="Download Document"></i></a>
                    </p>
                </div>
                -->
                <div id="history" class="container-fluid p-3">
                </div>
            </div>
            <!-- right column -->
            <div class="col-sm-2"></div>
        </div>
    </div>
</div>

    <!--
<script type="text/javascript">
    $('.dropdown-menu a.dropdown-toggle').on('click', function(e) {
        if (!$(this).next().hasClass('show')) {
            $(this).parents('.dropdown-menu').first().find('.show').removeClass("show");
        }
        const $subMenu = $(this).next(".dropdown-menu");
        $subMenu.toggleClass('show');
        $(this).parents('li.nav-item.dropdown.show').on('hidden.bs.dropdown', function(e) {
            $('.dropdown-submenu .show').removeClass("show");
        });
        return false;
    });
</script>

                <div class="btn-toolbar justify-content-between" role="toolbar" aria-label="Toolbar with button groups">
                    <div class="btn-group">
                        <div class="btn-group dropdown">
                            <button id="query-examples" type="button" class="btn btn-light dropdown-toggle" data-toggle="dropdown">Examples <span class="caret"></span></button>
                            <ul class="dropdown-menu">
                                <h5 class="dropdown-header">NEEM Background</h5>
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" tabindex="-1" href="#">Appearance <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('object_shape(Obj,Shape,Origin,Material).')">What are the shapes of an object?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('object_color_rgb(Obj,RGB).')">What colors does an object have?</a></li>
                                    </ul>
                                    <a class="dropdown-item dropdown-toggle" tabindex="-1" href="#">Structure <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has_component(Obj,Component).')">What are the components of an object?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has_sensor(Obj,Sensor).')">Does an object have a sensor component?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has_feature(Obj,Feature).')">What are the features of an object?</a></li>
                                    </ul>
                                    <a class="dropdown-item dropdown-toggle" tabindex="-1" href="#">Kinematics <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('is_at(Obj,Pose).')">What is the position of an object?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has link(Joint,Obj).')">Is an object linked via a joint?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has joint position limit(Joint,Limit).')">What are the limits of a joint?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('data_vis(piechart(chart_id), [\n    title: some_distribution,\n    data: [[a,b,c],[10,30,22]]]).')">What is the kinematic structure of an object?</a></li>
                                    </ul>
                                    <a class="dropdown-item dropdown-toggle" tabindex="-1" href="#">Dynamics <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has_mass(Obj,Mass)).')">What is the mass of an object?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has_net_force(Obj,Force).')">What is the force acting upon an object?</a></li>
                                    </ul>
                                    <a class="dropdown-item dropdown-toggle" tabindex="-1" href="#">Naive physics <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('affords(Obj,Affordance).')">What can an object be used for?</a></li>
                                    </ul>
                                </li>
                                <h5 class="dropdown-header">NEEM Narrative</h5>
                                <li class="dropdown-submenu">
                                    <a class="dropdown-item dropdown-toggle" tabindex="-1" href="#">Occurence <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('is_event(Evt).')">When did an event occur?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('is_action(Evt).')">When did an action occur?</a></li>
                                    </ul>
                                    <a class="dropdown-item dropdown-toggle" tabindex="-1" href="#">Participation <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has_participant(Evt,Obj).')">What objects participated in an event?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('is_performed_by(Evt,Agent).')">Which agent executed an action?</a></li>
                                    </ul>
                                    <a class="dropdown-item dropdown-toggle" tabindex="-1" href="#">Composition <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has_phase(Evt,Phase).')">What are the phases of an event?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has_motion_phase(Evt,Phase).')">What are the motions that were performed?</a></li>
                                    </ul>
                                    <a class="dropdown-item dropdown-toggle" tabindex="-1" href="#">Transformation <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has_transformation(Evt,From,To).')">What are the transformations caused by an event?</a></li>
                                    </ul>
                                    <a class="dropdown-item dropdown-toggle" tabindex="-1" href="#">Conceptualization <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('has_event_type(Evt,EvtType).')">How can an event be interpreted?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('executes_task(Evt,Tsk).')">What tasks were executed?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('is_failed_action(Act).')">What are the mistakes that happened?</a></li>
                                    </ul>
                                    <a class="dropdown-item dropdown-toggle" tabindex="-1" href="#">Contextualization <span class="caret"></span></a>
                                    <ul class="dropdown-menu">
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('is_setting_for(Episode,Entity).')">What entities are included?</a></li>
                                        <li><a class="dropdown-item" href="#"
                                            onclick="page.console.query('satisfies_plan(Episode,Plan).')">What is the plan that was executed?</a></li>
                                    </ul>
                                </li>
                            </ul>
                        </div>
                        <div class="btn-group">
                            <button id="query-view" type="button" class="btn btn-light dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">View</button>
                            <div class="dropdown-menu" aria-labelledby="query-view">
                                <a class="dropdown-item" href="#"
                                onclick="page.console.zoomIn()"><i class="fas fa-plus"></i> Larger Text</a>
                                <a class="dropdown-item" href="#"
                                onclick="page.console.zoomOut()"><i class="fas fa-minus"></i> Smaller Text</a>
                            </div>
                        </div>
                    </div>
                    <div class="btn-group" role="group" aria-label="Third group">
                        <button id="btn_query" type="button" class="btn btn-primary"
                                onclick="page.console.query()"><i class="fas fa-question"></i></button>
                        <button id="btn_query_next" type="button" class="btn btn-primary"
                                onclick="page.console.nextSolution()"><i class="fas fa-redo"></i></button>
                    </div>
                </div>
                -->

{% endblock %}

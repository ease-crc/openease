{% extends "openease_base.html" %}

{% block head %}
  <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='css/SCSS/layout.css') }}"/>
  
  <script type="text/javascript">

    function updateQueryString() {
        var urlQuery = {};
        var query = String(window.location.hash.substring(1));
        var vars = query.split("?");
        for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
            if (typeof urlQuery[pair[0]] === "undefined") {
                // If first entry with this name
                urlQuery[pair[0]] = decodeURIComponent(pair[1]);
            }
            else if (typeof urlQuery[pair[0]] === "string") {
                // If second entry with this name
                var arr = [ urlQuery[pair[0]],decodeURIComponent(pair[1]) ];
                urlQuery[pair[0]] = arr;
            }
            else {
                // If third or later entry with this name
                urlQuery[pair[0]].push(decodeURIComponent(pair[1]));
            }
        }
        return urlQuery;
    };
    
    function updateLocation() {
        var urlQuery = updateQueryString();
        // update NEEM selection from URL query
        // e.g., https://data.openease.org/QA?neem="ACAT/PR2-pipetting:latest"
        if(urlQuery['neem_id']) {
            $(window).open("google.de")
            console.error('neeeeeeeeeem');
          // TODO
            $.ajax({
                url : "/neems/{{ neem_id }}/activate",
                type : 'POST',
                data : {
                    id: neem_id
                },
                success : function(data) {
                // ... some code on success
                }
            });        
        }
    };
    
    $(document).ready(function () {
        $(window).load(updateLocation);
        $(window).bind('hashchange', updateLocation);
    });
  </script>
{% block head_inner %}
{% endblock %}
{% endblock %}

{% block body %}
{% block content %}
{% endblock %}
{% endblock %}

